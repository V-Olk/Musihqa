# 1. Цель проекта

Разработать интернет-сервис (далее Сервис) потоковой передачи музыки. Пользователь сможет слушать загружаемую авторами музыку, либо при отсутствии данной музыки в сервисе, загружать треки самостоятельно для личного использования.

# 2. Описание сервиса

Сервис состоит из следующих основных функциональных блоков:

1. Регистрация, аутентификация и авторизация
2. Функционал пользователя
3. Функционал автора
4. Функционал модератора
6. Уведомления о новом контенте

## 2.1 Типы пользователей

1. Пользователь
2. Автор
3. Модератор

## 2.2. Регистрация 

Процесс заведения учетной записи модератора может быть реализован при помощи команды на сервере. Этой команде должны быть переданы на вход следующие данные:

* электронная почта
* пароль

Процесс заведения автора через команду на сервере должен быть описан в документации Сервиса.

Процесс регистрации пользователей должен быть реализован в интерфейсах Сервиса. При регистрации пользователя должны быть запрошены следующие обязательные поля:

* электронная почта
* никнейм
* пароль

После отправки формы регистрации подписчика ему на электронную почту приходит письмо с подтверждением аккаунта.

Процесс регистрации авторов должен быть реализован в интерфейсах Сервиса. При регистрации должны быть запрошены следующие обязательные поля:

* имя исполнителя

* электронная почта автора
* цифровой UPC-код
* имя лейбла
* имя дистрибьютора
* электронная почта дистрибьютора

После отправки формы регистрации автора заявка обрабатывается вручную модератором. Ответ об отказе или создании аккаунта автора с данными для входа приходят на указанную почту автора.

## 2.3. Аутентификация пользователей, авторов, модераторов

Аутентификация всех типов пользователей осуществляется по email и паролю. При необходимости в настройках аккаунта можно подключить двухэтапную аутентификацию. Тогда для аутентификации будет необходимо также ввести одноразовый код из приложения-аутентификатора.

## 2.4. Функционал автора

Автор после аутентификации получает доступ к своему авторскому функционалу в Сервисе. Этот функционал состоит из следующих блоков:

1. Редактирование профиля
2. Добавление и редактирование контента
3. Аналитика

### 2.4.1. Редактирование профиля

В этом разделе у автора есть возможность редактирования данных своего профиля — email, описание исполнителя, аватар (изображение), банковский счет для произведения выплат, социальные сети. Возможные социальные сети:

* YouTube
* Instagram
* Facebook
* VK
* Linkedin

Должна быть возможность сменить пароль, подтвердив перед этим свой текущий пароль.

### 2.4.2 Добавление и редактирование контента

В этом разделе у автора есть возможность добавление альбомов с треками.

Для каждого альбома заполняется:

* Название альбома
* Обложка (изображение)
* Треки (аудиофайлы) и их названия

При добавлении контента автор может указать отложенную публикацию, тогда автор должен выбрать время, когда загруженный контент станет доступен для всех.

Также у автора есть возможность закрыть доступ к определенным альбомам или трекам или удалить их из Сервиса.

### 2.4.3. Аналитика

Автор видит свою общую аналитику и по каждому альбому.

Общая аналитика содержит: 

1. Количество пользователей, добавивших в избранное исполнителя, альбомы, треки
2. Общее время прослушивания за выбранный период
3. Количество прослушиваний всего контента автора за выбранный период
4. История выплат — списком, возможность экспорта в Excel информации о выплатах за выбранный период. Колонки: дата-время платежа, сумма платежа
5. Дата ближайшей выплаты и рассчитанное количество денег для выплаты на данный момент по Алгоритму расчета выплат авторам 

Аналитика по каждому альбому/треку содержит:

1. Количество пользователей, добавивших в избранное данный альбом/трек
2. Общее время прослушивания данного трека/альбома за выбранный период
3. Количество прослушиваний данного трека/альбома за выбранный период

## 2.5. Функционал пользователя

Пользователь после аутентификации получает доступ к пользовательскому функционалу в Сервисе. Этот функционал состоит из следующих блоков:

1. Редактирование профиля
2. Оформление и закрытие подписки
3. Прослушивание, добавление в избранное контента исполнителей, создание плейлистов
4. Поиск по Сервису
5. Добавление и редактирование контента для личного использования
6. Получение рекомендаций на основе предпочтений
7. Уведомление о новом контенте добавленных в избранное исполнителей

### 2.5.1. Редактирование профиля

В этом разделе у пользователя есть возможность редактирования данных своего профиля — email, аватар (изображение).

Должна быть возможность сменить пароль, подтвердив перед этим свой текущий пароль.

Должна быть возможность привязать/отвязать банковскую карту для оформления подписки.

### 2.5.2. Оформление и закрытие подписки

Существуют несколько типов подписок, условия определяются дополнительно администраторами Сервиса.

Каждый тип подписки содержит:

* название 
* описание
* обложка
* стоимость ежемесячной подписки в долларах
* стоимость ежегодной подписки в долларах

Должна быть опциональная возможность задать скидки, действующие указанное время, за покупку подписки на определенное количество месяцев. Скидка задаётся в процентах с указанием необходимого количества месяцев и периода времени действия скидки.

### 2.5.3. Прослушивание, добавление в избранное контента исполнителей, создание плейлистов

В этом разделе пользователь имеет возможность включать любые треки, добавленные авторами или пользователем в Сервис.

Треки представлены на нескольких страницах.

На странице избранного представлены добавленные пользователем в избранное треки, альбомы, плейлисты.

На главной странице должны отображаться сгенерированные плейлисты на основании предпочтений пользователя, недавно воспроизведённые пользователем плейлисты, исполнители, рекомендации плейлистов других пользователей. Ниже должны идти ссылки на страницы с музыкой по жанрам и категориям. 

Также должна быть Панель управления воспроизведением, которая всегда присутствует на экране, для управления пользователем воспроизведения трека: воспроизведение/пауза, добавить трек в избранное/удалить из избранного, включить следующий/предыдущий трек из очереди, увеличить/уменьшить звук, добавить трек в плейлист пользователя, изменить качество воспроизведения трека, открыть очередь воспроизведения.

На каждом треке/альбоме должна быть кнопка добавления пользователем в избранное или удаления из него при повторном нажатии.

На каждом треке должна быть кнопка добавления пользователем трека в плейлист или очередь воспроизведения.

Создание плейлистов происходит на странице избранного в разделе плейлистов. Есть возможность сделать плейлист общедоступным, тогда можно будет найти его по названию через поиск.

### 2.5.4. Поиск по Сервису



### 2.5.5. Добавление и редактирование контента для личного пользования

Пользователь имеет возможность на странице избранного в разделе "Свои треки" загружать треки для личного использования. Функционал загрузки аналогичен функционалу добавления контента автора, но добавляемые пользователем треки проверяются Алгоритмом проверки контента на уникальность на проверку существования данных треков в Сервисе. Загрузка обнаруженных в системе треков отменяется, пользователю сообщается о нахождении данных треков в Сервисе. Загруженные пользователем треки не доступны другим пользователям, даже если находятся в публичном плейлисте.    

### 2.5.6. Получение рекомендаций на основе предпочтений



### 2.5.7. Уведомление о новом контенте добавленных в избранное исполнителей

Автоматически подписчикам должны приходить уведомления на Email о всех новых постах автора в Системе. Подписчики могут отменить эти и другие письма настройкой в профиле.



## 2.6. Функционал модератора



## 2.7. Функционал Сервиса



### 2.7.1. Рекуррентные платежи

Рекуррентные платежи должны списываться через 30 дней после предыдущей оплаты. Если снять платёж не удалось — в течение ближайших 5 дней должна осуществляться ежедневная попытка списать сумму. В течение этих 5 дней доступ сохраняется, а подписчик получает после каждой неуспешной попытки письмо на email. После успешного снятия суммы за подписку подписчик также получает письмо на email.

После 5 дней неуспешных попыток списать сумму подписка останавливается и подписчик теряет доступ к постам и возможно Telegram чату (если чат входил в его подписку).

Шаблоны писем не редактируется в интерфейсах Системы, жёстко зашиты в самой системе и их можно отредактировать только изменяя эти шаблоны в коде Системы. 

### 2.7.2. Алгоритм расчета денег для выплаты



### 2.7.3. Поиск по Сервису





# 3. Предлагаемый стек технологий

Для реализации системы предлагается следующий стек технологий:

* Бэкенд:
  * Язык C#
  * Фреймворк ASP.NET Core
  * БД PostgreSQL
* Фронтенд:
  * React
  * TypeScript

Хранение файлов и изображений, загружаемых автором, должно осуществляться в S3-совместимом хранилище. 

# 4. Требования к дизайну

Минимализм, лаконичность, акцент на контент. Белый фон. Должен присутствовать логотип Системы на странице. Логотип необходимо разработать в рамках проекта.

В нижней части страницы (в подвале) должно быть написано:

«Работает на Open Source» со ссылкой на GitHub проекта.